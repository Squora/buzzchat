{
  "info": {
    "name": "BuzzChat API",
    "_postman_id": "buzzchat-api-collection",
    "description": "Complete API collection for BuzzChat backend",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000/api/v1",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register - Start",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+79991234567\",\n  \"email\": \"user@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            },
            "description": "Start registration process. SMS code will be sent to the phone."
          }
        },
        {
          "name": "Register - Verify Code",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+79991234567\",\n  \"code\": \"1234\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/verify",
              "host": ["{{base_url}}"],
              "path": ["auth", "verify"]
            },
            "description": "Verify SMS code and complete registration"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Login - Request Code",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+79991234567\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login/request-code",
              "host": ["{{base_url}}"],
              "path": ["auth", "login", "request-code"]
            },
            "description": "Request login code via SMS"
          }
        },
        {
          "name": "Login - Verify Code",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+79991234567\",\n  \"code\": \"1234\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "Login with verification code"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Refresh access token using refresh token"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/auth/current",
              "host": ["{{base_url}}"],
              "path": ["auth", "current"]
            },
            "description": "Get currently authenticated user"
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            },
            "description": "Logout and invalidate refresh token"
          }
        }
      ]
    },
    {
      "name": "Chat",
      "item": [
        {
          "name": "Create Group Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Team Discussion\",\n  \"description\": \"Chat for team collaboration\",\n  \"memberIds\": [2, 3, 4]\n}"
            },
            "url": {
              "raw": "{{base_url}}/chats/group",
              "host": ["{{base_url}}"],
              "path": ["chats", "group"]
            },
            "description": "Create a new group chat"
          }
        },
        {
          "name": "Create/Get Direct Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 2\n}"
            },
            "url": {
              "raw": "{{base_url}}/chats/direct",
              "host": ["{{base_url}}"],
              "path": ["chats", "direct"]
            },
            "description": "Create or get existing direct chat with another user"
          }
        },
        {
          "name": "Get All User Chats",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/chats",
              "host": ["{{base_url}}"],
              "path": ["chats"]
            },
            "description": "Get all chats for current user"
          }
        },
        {
          "name": "Get Chat Details",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/chats/:chatId",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Get chat details including members"
          }
        },
        {
          "name": "Update Chat",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Chat Name\",\n  \"description\": \"Updated description\",\n  \"photoUrl\": \"https://example.com/photo.jpg\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/chats/:chatId",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Update chat name, description, or photo (admins only)"
          }
        },
        {
          "name": "Add Members",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userIds\": [5, 6]\n}"
            },
            "url": {
              "raw": "{{base_url}}/chats/:chatId/members",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId", "members"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Add members to chat (admins only)"
          }
        },
        {
          "name": "Remove Member",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/chats/:chatId/members/:userId",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId", "members", ":userId"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                },
                {
                  "key": "userId",
                  "value": "5"
                }
              ]
            },
            "description": "Remove member from chat (admins only)"
          }
        },
        {
          "name": "Leave Chat",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/chats/:chatId/leave",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId", "leave"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Leave chat (owner cannot leave)"
          }
        },
        {
          "name": "Update Member Role",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": 3,\n  \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/chats/:chatId/members/role",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId", "members", "role"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Update member role (owner only)"
          }
        },
        {
          "name": "Delete Chat",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/chats/:chatId",
              "host": ["{{base_url}}"],
              "path": ["chats", ":chatId"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Delete chat (owner only)"
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/users/:userId",
              "host": ["{{base_url}}"],
              "path": ["users", ":userId"],
              "variable": [
                {
                  "key": "userId",
                  "value": "1"
                }
              ]
            },
            "description": "Get user profile by ID"
          }
        },
        {
          "name": "Update User Profile",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"photoUrl\": \"https://example.com/avatar.jpg\",\n  \"position\": \"Senior Developer\",\n  \"statusMessage\": \"Working on new features\",\n  \"departmentId\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/:userId",
              "host": ["{{base_url}}"],
              "path": ["users", ":userId"],
              "variable": [
                {
                  "key": "userId",
                  "value": "1"
                }
              ]
            },
            "description": "Update user profile"
          }
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/users?departmentId=1&isActive=true",
              "host": ["{{base_url}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "departmentId",
                  "value": "1",
                  "description": "Filter by department"
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "description": "Filter by active status"
                }
              ]
            },
            "description": "Get all users with optional filters"
          }
        },
        {
          "name": "Update Online Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"available\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/me/status",
              "host": ["{{base_url}}"],
              "path": ["users", "me", "status"]
            },
            "description": "Update online status (available, busy, away, offline)"
          }
        },
        {
          "name": "Get User Settings",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/users/me/settings",
              "host": ["{{base_url}}"],
              "path": ["users", "me", "settings"]
            },
            "description": "Get current user settings"
          }
        },
        {
          "name": "Update User Settings",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"theme\": \"dark\",\n  \"notifications\": true,\n  \"sound\": true,\n  \"emailNotifications\": false,\n  \"showOnlineStatus\": true,\n  \"language\": \"en\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/me/settings",
              "host": ["{{base_url}}"],
              "path": ["users", "me", "settings"]
            },
            "description": "Update user settings"
          }
        },
        {
          "name": "Deactivate User",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/users/:userId/deactivate",
              "host": ["{{base_url}}"],
              "path": ["users", ":userId", "deactivate"],
              "variable": [
                {
                  "key": "userId",
                  "value": "2"
                }
              ]
            },
            "description": "Deactivate user account (admin only)"
          }
        },
        {
          "name": "Activate User",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/users/:userId/activate",
              "host": ["{{base_url}}"],
              "path": ["users", ":userId", "activate"],
              "variable": [
                {
                  "key": "userId",
                  "value": "2"
                }
              ]
            },
            "description": "Activate user account (admin only)"
          }
        },
        {
          "name": "Create Department",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Engineering\",\n  \"description\": \"Software development team\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/departments",
              "host": ["{{base_url}}"],
              "path": ["departments"]
            },
            "description": "Create new department (admin only)"
          }
        },
        {
          "name": "Update Department",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Engineering Department\",\n  \"description\": \"Software development and QA team\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/departments/:departmentId",
              "host": ["{{base_url}}"],
              "path": ["departments", ":departmentId"],
              "variable": [
                {
                  "key": "departmentId",
                  "value": "1"
                }
              ]
            },
            "description": "Update department (admin only)"
          }
        },
        {
          "name": "Get All Departments",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/departments",
              "host": ["{{base_url}}"],
              "path": ["departments"]
            },
            "description": "Get all departments"
          }
        }
      ]
    },
    {
      "name": "Message",
      "item": [
        {
          "name": "Send Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chatId\": 1,\n  \"content\": \"Hello @user, check this out!\",\n  \"mentionedUserIds\": [2],\n  \"attachments\": [\n    {\n      \"url\": \"https://example.com/file.pdf\",\n      \"type\": \"document\",\n      \"name\": \"document.pdf\",\n      \"size\": 1024000\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/messages",
              "host": ["{{base_url}}"],
              "path": ["messages"]
            },
            "description": "Send a new message"
          }
        },
        {
          "name": "Get Messages",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/messages?chatId=1&limit=50&beforeId=100",
              "host": ["{{base_url}}"],
              "path": ["messages"],
              "query": [
                {
                  "key": "chatId",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                },
                {
                  "key": "beforeId",
                  "value": "100",
                  "description": "Get messages before this ID (pagination)"
                }
              ]
            },
            "description": "Get messages from chat with pagination"
          }
        },
        {
          "name": "Update Message",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Updated message content\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/messages/:messageId",
              "host": ["{{base_url}}"],
              "path": ["messages", ":messageId"],
              "variable": [
                {
                  "key": "messageId",
                  "value": "1"
                }
              ]
            },
            "description": "Update message content (author only)"
          }
        },
        {
          "name": "Delete Message",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/messages/:messageId",
              "host": ["{{base_url}}"],
              "path": ["messages", ":messageId"],
              "variable": [
                {
                  "key": "messageId",
                  "value": "1"
                }
              ]
            },
            "description": "Delete message (author or chat admin)"
          }
        },
        {
          "name": "Add Reaction",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emoji\": \"üëç\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/messages/:messageId/reactions",
              "host": ["{{base_url}}"],
              "path": ["messages", ":messageId", "reactions"],
              "variable": [
                {
                  "key": "messageId",
                  "value": "1"
                }
              ]
            },
            "description": "Add emoji reaction to message"
          }
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/messages/:messageId/read",
              "host": ["{{base_url}}"],
              "path": ["messages", ":messageId", "read"],
              "variable": [
                {
                  "key": "messageId",
                  "value": "1"
                }
              ]
            },
            "description": "Mark message as read"
          }
        }
      ]
    },
    {
      "name": "Internal (WebSocket Gateway)",
      "item": [
        {
          "name": "Validate Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{access_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/internal/validate-token",
              "host": ["{{base_url}}"],
              "path": ["internal", "validate-token"]
            },
            "description": "Validate JWT token (for WebSocket gateway)"
          }
        },
        {
          "name": "Get User",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/internal/users/:userId",
              "host": ["{{base_url}}"],
              "path": ["internal", "users", ":userId"],
              "variable": [
                {
                  "key": "userId",
                  "value": "1"
                }
              ]
            },
            "description": "Get user data (for WebSocket gateway)"
          }
        },
        {
          "name": "Get Chat Members",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/internal/chats/:chatId/members",
              "host": ["{{base_url}}"],
              "path": ["internal", "chats", ":chatId", "members"],
              "variable": [
                {
                  "key": "chatId",
                  "value": "1"
                }
              ]
            },
            "description": "Get chat members (for WebSocket gateway)"
          }
        }
      ]
    }
  ]
}
